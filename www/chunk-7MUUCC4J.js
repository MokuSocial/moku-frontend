import{a as $}from"./chunk-6Z5PYMTU.js";import{A as r,B as x,C as m,J as b,K as q,T as D,Y as F,b as k,c as f,ca as _,e as B,ea as P,f as L,fa as U,g as H,ga as T,ha as I,ia as R,j as e,ja as E,k as V,ka as N,l as C,la as u,m as A,ma as W,n as y,na as G,pa as X,q as S,r as d,s as g,t as w,u as h,v as l,w as n,x as c,y as j,z as O}from"./chunk-5XMXEWGB.js";import"./chunk-5PNY5LA3.js";import"./chunk-5G75OVHD.js";import"./chunk-F47KNXTF.js";import"./chunk-2DKIECZ6.js";import"./chunk-BXPB4ZAG.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-MKXY3ISB.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function Q(o){return Array.from({length:o},(a,s)=>s)}var M,o1=function(){if(typeof window>"u")return new Map;if(!M){var o=window;o.Ionicons=o.Ionicons||{},M=o.Ionicons.map=o.Ionicons.map||new Map}return M},z=function(o){Object.keys(o).forEach(function(a){Y(a,o[a]);var s=a.replace(/([a-z0-9]|(?=[A-Z]))([A-Z0-9])/g,"$1-$2").toLowerCase();a!==s&&Y(s,o[a])})},Y=function(o,a){var s=o1(),t=s.get(o);t===void 0?s.set(o,a):t!==a&&console.warn('[Ionicons Warning]: Multiple icons were mapped to name "'.concat(o,'". Ensure that multiple icons are not mapped to the same icon name.'))};var Z="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M394 480a16 16 0 01-9.39-3L256 383.76 127.39 477a16 16 0 01-24.55-18.08L153 310.35 23 221.2a16 16 0 019-29.2h160.38l48.4-148.95a16 16 0 0130.44 0l48.4 149H480a16 16 0 019.05 29.2L359 310.35l50.13 148.53A16 16 0 01394 480z'/></svg>",J="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M480 208H308L256 48l-52 160H32l140 96-54 160 138-100 138 100-54-160z' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M256 48v316L118 464l54-160-140-96h172l52-160z'/></svg>";var K="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M480 208H308L256 48l-52 160H32l140 96-54 160 138-100 138 100-54-160z' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>";var a1=()=>[E,R,u,I,X,D,U,G],s1=o=>["/recipe",o],t1=()=>["Ok"],i1=(o,a)=>a.id;function n1(o,a){if(o&1&&c(0,"ion-icon",9),o&2){let s=a.$implicit;h("name",s)}}function l1(o,a){if(o&1&&(l(0,"ion-card",2),c(1,"ion-img",5),l(2,"div",6)(3,"div",7)(4,"div",8),g(5,n1,1,1,"ion-icon",9,S),n()(),l(7,"div",10)(8,"ion-text",11)(9,"h3"),x(10),n()(),l(11,"ion-text",12)(12,"p"),x(13),n()()()()()),o&2){let s=a.$implicit,t=r(2);h("routerLink",q(4,s1,s.id)),e(),h("src",s.bannerUrl),e(4),w(t.getStars(s.voteAverage)),e(5),m(s.title),e(3),m(s.author.name)}}function c1(o,a){if(o&1){let s=j();l(0,"ion-list",0)(1,"div",1),g(2,l1,14,6,"ion-card",2,i1),n()(),l(4,"ion-infinite-scroll",3),O("ionInfinite",function(i){L(s);let v=r();return H(v.loadMore(i))}),c(5,"ion-infinite-scroll-content",4),n()}if(o&2){let s=r();e(2),w(s.recipes)}}function e1(o,a){o&1&&(l(0,"ion-item",14)(1,"ion-avatar",15),c(2,"ion-skeleton-text"),n(),c(3,"ion-skeleton-text",16),n())}function r1(o,a){if(o&1&&(l(0,"ion-list",13)(1,"div",1),g(2,e1,4,0,"ion-item",14,d),n()()),o&2){let s=r();e(2),w(s.range(5))}}function v1(o,a){o&1&&(l(0,"ion-item",14)(1,"ion-avatar",15),c(2,"ion-skeleton-text"),n(),c(3,"ion-skeleton-text",16),n())}function g1(o,a){if(o&1&&(l(0,"ion-list",0)(1,"div",1),g(2,v1,4,0,"ion-item",14,d),n()()),o&2){let s=r();e(2),w(s.range(10))}}function w1(o,a){if(o&1&&c(0,"ion-alert",17),o&2){let s=r();h("message",s.error)("buttons",b(2,t1))}}var y1=(()=>{let a=class a{constructor(){this.recipeService=B($),this.currentPage=1,this.error=null,this.isLoading=!1,this.recipes=[],this.dummyArray=new Array(5),this.id=1,this.range=Q,this.loadRecipes(),z({star:Z,starHalf:J,starOutline:K})}loadRecipes(t){this.error=null,t||(this.isLoading=!0),this.recipeService.getRecipes(this.currentPage).pipe(f(()=>{this.isLoading=!1}),k(i=>(this.error=i.error.status_message,[]))).subscribe({next:i=>{this.recipes.push(...i.results),t?.target.complete(),t&&(t.target.disabled=i.total_pages===this.currentPage)}})}loadMore(t){this.currentPage++,this.loadRecipes(t)}getStars(t){let i=[],v=Math.round(t*2)/2;for(let p=1;p<=5;p++)p<=v?i.push("star"):p-.5===v?i.push("star-half"):i.push("star-outline");return i}};a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=V({type:a,selectors:[["app-home"]],decls:7,vars:0,consts:[["lines","none"],[1,"container"],["button","",1,"recipe-card",3,"routerLink"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more data..."],[1,"card-bg",3,"src"],[1,"overlay"],[1,"top-row"],[1,"stars-badge"],[1,"star",3,"name"],[1,"bottom-row"],[1,"ion-text-start"],[1,"ion-text-end"],[1,"ion-padding-top"],["lines","none",1,"ion-padding-bottom"],["slot","start"],["animated","",2,"height","40px"],["header","Error","isOpen","true",3,"message","buttons"]],template:function(i,v){i&1&&(l(0,"ion-content"),C(1,c1,6,0)(2,r1,4,0)(3,g1,4,0)(4,w1,1,3),A(5,1,a1,2,3,4),y(),n())},dependencies:[_,W,P,u,N,T,F],styles:[".recipe-card[_ngcontent-%COMP%]{margin:12px;border-radius:12px;overflow:hidden;position:relative}.card-bg[_ngcontent-%COMP%]{width:100%;height:250px;object-fit:cover}.overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:space-between;padding:12px;background:linear-gradient(to top,rgba(0,0,0,.6),transparent 40%);color:#fff}.top-row[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.bottom-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end}.bottom-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:700}.bottom-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem;font-style:italic}.stars-badge[_ngcontent-%COMP%]{display:flex;gap:2px;padding:4px 6px;border-radius:8px;background:#0009}.star[_ngcontent-%COMP%]{font-size:1rem;color:gold}.container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}"]});let o=a;return o})();export{y1 as HomePage};
