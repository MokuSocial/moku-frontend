import{a as G}from"./chunk-6Z5PYMTU.js";import{$ as L,A as d,B as l,C as u,D as b,E as I,F as $,G as j,H as D,I as V,L as B,M as N,N as w,O as U,Z as q,_ as z,e as T,f as _,g as f,ga as W,h as C,i as v,j as p,k as E,na as K,o as h,p as y,q as P,qa as A,r as R,s as m,t as g,u as M,v as a,w as r,x,y as k,z as F}from"./chunk-5XMXEWGB.js";import"./chunk-5PNY5LA3.js";import"./chunk-5G75OVHD.js";import"./chunk-F47KNXTF.js";import"./chunk-2DKIECZ6.js";import"./chunk-BXPB4ZAG.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-MKXY3ISB.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as S,b as O}from"./chunk-JHI3MBHO.js";var H=(i,o)=>o.key;function J(i,o){if(i&1&&(a(0,"div",14)(1,"span",15),l(2),r(),a(3,"ion-text",16),l(4),r()()),i&2){let n=o.$implicit;p(2),u(n.name),p(2),I(" ",n.quantity," ",n.unit," ")}}function Q(i,o){if(i&1&&(a(0,"div",6),m(1,J,5,3,"div",14,R),r()),i&2){let n=o.$implicit;p(),g(n)}}function X(i,o){if(i&1&&(a(0,"div",9)(1,"span"),l(2),r(),a(3,"ion-text",16),l(4),r()()),i&2){let n=o.$implicit,t=d(2);p(2),b("",t.mapIndications(n.key),": "),p(2),I("",n.value," ",n.key=="difficulty"?"":"min")}}function Y(i,o){if(i&1&&x(0,"img",19),i&2){let n=d(),t=n.$implicit,e=n.$index;M("alt",V("step ",e+1))("src",t.imageUrl,v)}}function Z(i,o){if(i&1&&(a(0,"div",13)(1,"ion-text",17),l(2),r(),a(3,"div",18),l(4),r(),h(5,Y,1,3,"img",19),r()),i&2){let n=o.$implicit,t=o.$index;p(2),b("",t+1,"."),p(2),u(n.text),p(),y(n.imageUrl?5:-1)}}function ee(i,o){if(i&1){let n=k();x(0,"img",0),a(1,"div",1)(2,"h1",2),l(3),r(),a(4,"div",3)(5,"div",4)(6,"h2"),l(7,"Ingredients"),r(),a(8,"div",5),m(9,Q,3,0,"div",6,P),r()(),a(11,"div",7)(12,"h2"),l(13,"Indications"),r(),a(14,"div",8),m(15,X,5,3,"div",9,H),B(17,"keyvalue"),r()()(),a(18,"ion-input",10),D("ngModelChange",function(e){_(n);let c=d();return j(c.peopleCount,e)||(c.peopleCount=e),f(e)}),F("ionChange",function(e){_(n);let c=d();return f(c.onPeopleCountChange(e))}),r(),x(19,"hr",11),a(20,"div",12),m(21,Z,6,3,"div",13,P),r()()}if(i&2){let n=o,t=d();M("src",n.bannerUrl,v),p(3),u(n.title),p(6),g(t.ingredientColumns()),p(6),g(N(17,3,n.indications)),p(3),$("ngModel",t.peopleCount),p(3),g(n.steps)}}function te(i,o){i&1&&(a(0,"ion-text"),l(1,"Loading..."),r())}var de=(()=>{let o=class o{set id(t){this.recipeService.getRecipeById(t).subscribe(e=>{this.recipe.set(e),this.peopleCount.set(e.servings)})}splitIngredients(t,e){let c=[];for(let s=0;s<t.length;s+=e)c.push(t.slice(s,s+e));return c}onPeopleCountChange(t){let e=t.target.value;typeof e=="number"?this.peopleCount.set(e):this.peopleCount.update(c=>e?parseInt(e,10):c)}mapIndications(t){switch(t){case"prepTime":return"Preparazione";case"cookTime":return"Cottura";case"difficulty":return"Difficolt\xE0";case"restTime":return"Riposo";default:return"Label"}}constructor(){this.recipeService=T(G),this.recipe=C(null),this.peopleCount=C(this.recipe()?.servings??0),this.scaledIngredients=w(()=>{let t=this.recipe();return t?t.ingredients.map(e=>O(S({},e),{quantity:e.quantity*this.peopleCount()/t.servings})):[]}),this.ingredientColumns=w(()=>this.splitIngredients(this.scaledIngredients(),5))}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=E({type:o,selectors:[["app-recipe"]],inputs:{id:"id"},decls:3,vars:1,consts:[["alt","Recipe cover",1,"recipe-banner",3,"src"],[1,"main-container"],[1,"recipe-title","ion-text-center"],[1,"ingredients-indications-row"],[1,"ingredients-col"],[1,"ingredients-grid"],[1,"ingredient-column"],[1,"indications-col"],[1,"indications-list"],[1,"indication"],["label","Servings","type","number","min","1",1,"servings-input",3,"ngModelChange","ionChange","ngModel"],[1,"section-separator"],[1,"steps-list"],[1,"step"],[1,"ingredient"],[1,"ingredient-name"],["color","medium"],["color","medium",1,"step-index"],[1,"step-description"],[1,"step-image",3,"src","alt"]],template:function(e,c){if(e&1&&(a(0,"ion-content"),h(1,ee,23,5)(2,te,2,0,"ion-text"),r()),e&2){let s;p(),y((s=c.recipe())?1:2,s)}},dependencies:[K,A,W,L,q,z,U],styles:[".main-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.recipe-banner[_ngcontent-%COMP%]{width:100%;max-height:300px;object-fit:cover;border-bottom-left-radius:18px;border-bottom-right-radius:18px;display:block}.recipe-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin:20px 0 16px;letter-spacing:.5px}.ingredients-indications-row[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:center;flex-wrap:wrap;gap:32px 128px;margin-bottom:24px}.ingredients-grid[_ngcontent-%COMP%]{display:flex;gap:24px;justify-content:center;margin-bottom:16px}.ingredients-col[_ngcontent-%COMP%], .indications-col[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:0 16px}.ingredient[_ngcontent-%COMP%], .indication[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:space-between;gap:4px}.ingredient-name[_ngcontent-%COMP%]{font-weight:500;margin-right:8px}.indications-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:4px}.servings-input[_ngcontent-%COMP%]{max-width:200px;margin:0 24px}.section-separator[_ngcontent-%COMP%]{border-bottom:1px solid #6c757d}.steps-list[_ngcontent-%COMP%]{margin:24px 24px 12px;display:flex;flex-direction:column;gap:18px}.step[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.step-index[_ngcontent-%COMP%]{font-weight:700;min-width:24px}.step-description[_ngcontent-%COMP%]{flex:1;max-width:650px}.step-image[_ngcontent-%COMP%]{max-width:80px;max-height:80px;border-radius:8px;object-fit:cover;margin-left:8px}"]});let i=o;return i})();export{de as RecipePage};
